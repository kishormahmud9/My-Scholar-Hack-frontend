# `handleVerifyOTP` ফাংশনটি কী করে (বাংলায় ব্যাখ্যা)

এই ফাংশনটি ইউজারের দেওয়া ওটিপি (OTP) যাচাই করার জন্য ব্যবহার করা হয়। এর কার্যক্রম নিচে ধাপ অনুসারে ব্যাখ্যা করা হলো:

১. **ওটিপি সংগ্রহ ও চেক করা:**
   - `const otpCode = otp.join('');` 
     - ইউজারের ইনপুট করা ৬টি আলাদা সংখ্যাকে যুক্ত করে একটি পূর্ণ স্ট্রিং তৈরি করে।
   - **চেকিং:** যদি ওটিপি ৬ সংখ্যার কম হয়, তাহলে একটি এরর মেসেজ দেখায়—"Please enter the complete 6-digit code"।

২. **লোডিং এবং এরর স্টেট সেট করা:**
   - `setIsVerifying(true);` -> ভেরিফিকেশন প্রক্রিয়া শুরু হওয়ায় লোডিং অবস্থা চালু হয়।
   - `setError("");` -> আগের কোনো এরর থাকলে তা মুছে ফেলা হয়।

৩. **ইমেইল খুঁজে বের করা:**
   - `sessionStorage` থেকে `pendingVerificationEmail` নাম দিয়ে সেভ করা ইমেইলটি খোঁজা হয়। 
   - যদি ইমেইল না পাওয়া যায়, তবে ইউজারকে আবার ভেরিফিকেশন শুরু করতে বলা হয়।

৪. **এপিআই (API) কল করা:**
   - `/otp/verify` লিঙ্কে ইমেইল এবং ওটিপি পাঠিয়ে সার্ভারে রিকোয়েস্ট করা হয়।
   - যদি কোনো কারণে সার্ভার থেকে এরর আসে (যেমন ভুল ওটিপি), তাহলে সেটি `catch` ব্লকে ধরা হয় এবং ইউজারকে এরর মেসেজ দেখানো হয়। ভুল হলে ইনপুট ফিল্ডগুলো খালি করে দেওয়া হয়।

৫. **সফল ভেরিফিকেশন:**
   - যদি ওটিপি সঠিক হয় (`response.success === true`):
     - `sessionStorage` থেকে ইমেইল মুছে ফেলা হয়।
     - একটি সাকসেস মেসেজ দেখায়—"Email verified successfully!"।

৬. **পরবর্তী ধাপে যাওয়া (Plan Selection):**
   - `localStorage` চেক করে দেখা হয় ইউজার আগে কোনো প্ল্যান সিলেক্ট করেছিলেন কিনা (`selectedPlan`)।
   - **যদি কোনো প্ল্যান সিলেক্ট না থাকে:** 
     - ইউজারকে ড্যাশবোর্ডে (`/dashboard`) অথবা প্রাইসিং পেজে (`/pricing`) পাঠিয়ে দেওয়া হয়।
   - **যদি প্ল্যান সিলেক্ট করা থাকে:**
     - সেই প্ল্যানটির জন্য চেকআউট বা পেমেন্ট পেজে নিয়ে যাওয়ার চেষ্টা করা হয়।
     - সফল হলে পেমেন্ট গেইটওয়েতে রিডাইরেক্ট করে।
     - কোনো সমস্যা হলে ড্যাশবোর্ডে পাঠিয়ে দেয়।

৭. **ব্যর্থ ভেরিফিকেশন:**
   - যদি এপিআই থেকে বলা হয় ওটিপি ভুল (`success` false), তাহলে এরর মেসেজ দেখানো হয় এবং ইনপুট ফিল্ডগুলো রিসেট করে দেওয়া হয় যাতে ইউজার আবার চেষ্টা করতে পারে।

৮. **শেষে (Finally):**
   - কাজ শেষ হলে `setIsVerifying(false);` দিয়ে লোডিং অবস্থা বন্ধ করা হয়।
